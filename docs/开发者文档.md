# ğŸ”§ å¼€å‘è€…æ–‡æ¡£

## ğŸ“ é¡¹ç›®æ¶æ„

### æ•´ä½“æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             ä¸»åº”ç”¨ç¨‹åº              â”‚
â”‚          (main_window.py)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             ç”¨æˆ·ç•Œé¢å±‚              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚    â”‚  éŸ³é¢‘æå–   â”‚  å­—å¹•é‡å‘½å â”‚    â”‚
â”‚    â”‚    æ ‡ç­¾é¡µ   â”‚    æ ‡ç­¾é¡µ   â”‚    â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             ä¸šåŠ¡é€»è¾‘å±‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ éŸ³é¢‘æå–å™¨  â”‚   å­—å¹•é‡å‘½åå™¨  â”‚  â”‚
â”‚  â”‚(AudioExtractor)â”‚(SubtitleRenamer)â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             é€šç”¨æœåŠ¡å±‚              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚æ¿€æ´»ç®¡ç† â”‚å·¥å…·å‡½æ•° â”‚é…ç½®ç®¡ç† â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚             åº•å±‚ä¾èµ–å±‚              â”‚
â”‚      FFmpeg/FFprobe + PyQt6        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ¨¡å—ä¾èµ–å…³ç³»

```mermaid
graph TD
    A[main.py] --> B[main_window.py]
    B --> C[AudioExtractor]
    B --> D[SubtitleRenamer]
    B --> E[ActivationDialog]
    
    C --> F[ActivationManager]
    C --> G[Utils]
    C --> H[AppConfig]
    
    D --> F
    D --> G
    D --> H
    
    E --> F
    
    F --> H
    G --> H
    
    C --> I[FFmpeg/FFprobe]
    D --> I
    
    B --> J[PyQt6]
    E --> J
```

## ğŸ—ï¸ ä»£ç ç»“æ„è¯¦è§£

### æ ¸å¿ƒæ¨¡å—è¯´æ˜

#### 1. ä¸»åº”ç”¨ç¨‹åº (`src/main_window.py`)
```python
class MainWindow(QMainWindow):
    """ä¸»åº”ç”¨ç¨‹åºçª—å£
    
    èŒè´£ï¼š
    - æ•´åˆéŸ³é¢‘æå–å’Œå­—å¹•é‡å‘½ååŠŸèƒ½
    - ç®¡ç†æ ‡ç­¾é¡µç•Œé¢
    - å¤„ç†ç”¨æˆ·äº¤äº’
    - åè°ƒå„åŠŸèƒ½æ¨¡å—
    """
```

**å…³é”®æ–¹æ³•**ï¼š
- `create_audio_extractor_tab()` - åˆ›å»ºéŸ³é¢‘æå–ç•Œé¢
- `create_subtitle_renamer_tab()` - åˆ›å»ºå­—å¹•é‡å‘½åç•Œé¢
- `start_audio_extraction()` - å¯åŠ¨éŸ³é¢‘æå–æµç¨‹
- `scan_subtitles()` - æ‰«æå­—å¹•æ–‡ä»¶

#### 2. éŸ³é¢‘æå–å™¨ (`modules/audio_extractor/extractor.py`)
```python
class AudioExtractor(QThread):
    """éŸ³é¢‘æå–å·¥ä½œçº¿ç¨‹
    
    èŒè´£ï¼š
    - æ‰«æè§†é¢‘æ–‡ä»¶
    - åˆ†æéŸ³é¢‘æµä¿¡æ¯
    - æ‰§è¡ŒéŸ³é¢‘æå–å’Œè½¬ç 
    - æŠ¥å‘Šå¤„ç†è¿›åº¦
    """
```

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- `scan_video_files()` - æ‰«æè§†é¢‘æ–‡ä»¶
- `get_audio_info()` - è·å–éŸ³é¢‘æµä¿¡æ¯
- `detect_channel_volumes()` - æ£€æµ‹ä¼ªç«‹ä½“å£°
- `extract_audio()` - æå–éŸ³é¢‘æ–‡ä»¶
- `convert_to_mp3()` - è½¬ç ä¸ºMP3

#### 3. å­—å¹•é‡å‘½åå™¨ (`modules/subtitle_renamer/renamer.py`)
```python
class SubtitleRenamer:
    """å­—å¹•é‡å‘½åå™¨
    
    èŒè´£ï¼š
    - æ‰«æè§†é¢‘å’Œå­—å¹•æ–‡ä»¶
    - æ‰§è¡Œæ™ºèƒ½åŒ¹é…ç®—æ³•
    - ç”Ÿæˆé‡å‘½åè®¡åˆ’
    - æ‰§è¡Œæ‰¹é‡é‡å‘½å
    """
```

**åŒ¹é…ç®—æ³•**ï¼š
- `extract_episode_tokens()` - æå–å‰§é›†ç¼–å·
- `build_plan()` - æ„å»ºé‡å‘½åè®¡åˆ’
- `execute_plan()` - æ‰§è¡Œé‡å‘½å
- `undo_last_operation()` - æ’¤é”€æ“ä½œ

#### 4. æ¿€æ´»ç®¡ç†å™¨ (`modules/common/activation.py`)
```python
class ActivationManager:
    """æ¿€æ´»ç®¡ç†å™¨
    
    èŒè´£ï¼š
    - éªŒè¯æ¿€æ´»ç 
    - ä¿å­˜æ¿€æ´»çŠ¶æ€
    - æ£€æŸ¥æ¿€æ´»çŠ¶æ€
    - å¤„ç†æƒé™é—®é¢˜
    """
```

### é…ç½®ç³»ç»Ÿ (`config/app_config.py`)

#### åº”ç”¨é…ç½®
```python
# åº”ç”¨åŸºæœ¬ä¿¡æ¯
APP_NAME = "è§†é¢‘å¤„ç†å·¥å…·é›†"
APP_VERSION = "2.0.0"

# æ”¯æŒçš„æ–‡ä»¶æ ¼å¼
VIDEO_EXTENSIONS = {'.mp4', '.avi', '.mkv', ...}
SUBTITLE_EXTENSIONS = {'.srt', '.ass', '.ssa', ...}
AUDIO_EXTENSIONS = {'.mp3', '.wav', '.m4a', ...}

# å¤„ç†å‚æ•°
MAX_FILE_SIZE_MB = 500
DEFAULT_THREADS = 4
MAX_THREADS = 32
```

#### è·¯å¾„ç®¡ç†
```python
def get_app_root() -> Path:
    """è·å–åº”ç”¨æ ¹ç›®å½•"""
    
def get_bin_path() -> Path:
    """è·å–äºŒè¿›åˆ¶æ–‡ä»¶ç›®å½•"""
    
def get_resources_path() -> Path:
    """è·å–èµ„æºæ–‡ä»¶ç›®å½•"""
```

## ğŸ¨ UIè®¾è®¡ç³»ç»Ÿ

### æ ·å¼æ¶æ„ (`ui/styles/app_style.py`)

#### é¢œè‰²ç³»ç»Ÿ
```python
COLORS = {
    'primary': '#007AFF',           # ä¸»è‰²è°ƒ
    'primary_hover': '#0056CC',     # æ‚¬åœè‰²
    'background': '#ffffff',        # èƒŒæ™¯è‰²
    'text': '#1a1a1a',            # æ–‡æœ¬è‰²
    'border': '#d0d7de',          # è¾¹æ¡†è‰²
    'success': '#2da44e',         # æˆåŠŸè‰²
    'warning': '#ffd666',         # è­¦å‘Šè‰²
    'error': '#da3633',           # é”™è¯¯è‰²
}
```

#### ç»„ä»¶æ ·å¼
- **æŒ‰é’®ç³»ç»Ÿ**ï¼šä¸»è¦æŒ‰é’®ã€æ¬¡è¦æŒ‰é’®ã€å±é™©æŒ‰é’®
- **è¾“å…¥æ§ä»¶**ï¼šæ–‡æœ¬æ¡†ã€å¤é€‰æ¡†ã€æ•°å€¼è¾“å…¥
- **å®¹å™¨ç»„ä»¶**ï¼šç»„æ¡†ã€æ ‡ç­¾é¡µã€è¡¨æ ¼
- **åé¦ˆç»„ä»¶**ï¼šè¿›åº¦æ¡ã€æ¶ˆæ¯æ¡†ã€çŠ¶æ€æ 

### å“åº”å¼è®¾è®¡

#### çª—å£å°ºå¯¸é€‚é…
```python
# æœ€å°å°ºå¯¸
self.setMinimumSize(1000, 700)
# é»˜è®¤å°ºå¯¸  
self.resize(1000, 800)
```

#### å¸ƒå±€ç®¡ç†
- **å‚ç›´å¸ƒå±€**ï¼šä¸»è¦å†…å®¹åŒºåŸŸ
- **æ°´å¹³å¸ƒå±€**ï¼šå·¥å…·æ å’ŒæŒ‰é’®ç»„
- **ç½‘æ ¼å¸ƒå±€**ï¼šå¤æ‚è¡¨å•
- **æ‹‰ä¼¸å¸ƒå±€**ï¼šè‡ªé€‚åº”ç©ºé—´åˆ†é…

## ğŸ”„ æ•°æ®æµè®¾è®¡

### éŸ³é¢‘æå–æ•°æ®æµ

```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶å¤¹
      â†“
æ‰«æè§†é¢‘æ–‡ä»¶
      â†“
åˆ†æéŸ³é¢‘æµä¿¡æ¯
      â†“
æ£€æµ‹ä¼ªç«‹ä½“å£°
      â†“
ç¡®å®šè¾“å‡ºæ ¼å¼
      â†“
åˆ›å»ºå·¥ä½œé˜Ÿåˆ—
      â†“
å¤šçº¿ç¨‹å¤„ç†
      â†“
è¿›åº¦æ›´æ–°
      â†“
å®Œæˆå›è°ƒ
```

### å­—å¹•é‡å‘½åæ•°æ®æµ

```
ç”¨æˆ·é€‰æ‹©æ–‡ä»¶å¤¹
      â†“
æ‰«æè§†é¢‘å’Œå­—å¹•
      â†“
æå–å‰§é›†ä¿¡æ¯
      â†“
æ‰§è¡ŒåŒ¹é…ç®—æ³•
      â†“
ç”Ÿæˆé‡å‘½åè®¡åˆ’
      â†“
ç”¨æˆ·ç¡®è®¤
      â†“
æ‰§è¡Œé‡å‘½å
      â†“
è®°å½•æ“ä½œæ—¥å¿—
```

## ğŸ”§ å…³é”®ç®—æ³•å®ç°

### ä¼ªç«‹ä½“å£°æ£€æµ‹ç®—æ³•

```python
def detect_channel_volumes(self, video_file: Path, stream_index: int) -> Tuple[float, float, str]:
    """æ£€æµ‹å·¦å³å£°é“éŸ³é‡"""
    # 1. ä½¿ç”¨FFmpeg astatsæ»¤é•œåˆ†æ
    # 2. è§£æå·¦å³å£°é“RMSéŸ³é‡
    # 3. è®¡ç®—éŸ³é‡å·®å¼‚
    # 4. åˆ¤æ–­éŸ³é¢‘ç±»å‹
    
    volume_diff = abs(left_rms - right_rms)
    silent_threshold = -50.0
    significant_diff = 15.0
    
    if left_rms < silent_threshold and right_rms >= silent_threshold:
        return left_rms, right_rms, "pseudo_stereo_right"
    elif right_rms < silent_threshold and left_rms >= silent_threshold:
        return left_rms, right_rms, "pseudo_stereo_left"
    elif volume_diff > significant_diff:
        return left_rms, right_rms, "pseudo_stereo_left" if left_rms > right_rms else "pseudo_stereo_right"
    else:
        return left_rms, right_rms, "true_stereo"
```

### æ™ºèƒ½åŒ¹é…ç®—æ³•

```python
def build_plan(self, videos: List[FileItem], subs: List[FileItem]) -> List[PlanRow]:
    """æ„å»ºé‡å‘½åè®¡åˆ’"""
    # 1. æŒ‰å‰§é›†ç¼–å·åˆ†ç»„è§†é¢‘
    # 2. ä¼˜å…ˆå‰§é›†ç¼–å·åŒ¹é…
    # 3. æ¨¡ç³Šæ–‡ä»¶ååŒ¹é…
    # 4. å¯é€‰æ—¶é•¿éªŒè¯
    
    for s in subs:
        # å‰§é›†ç¼–å·åŒ¹é…
        for ep in s.episodes:
            if ep in video_by_episode:
                candidates = video_by_episode[ep]
                # åŒç›®å½•ä¼˜å…ˆ + ç›¸ä¼¼åº¦æ’åº
                candidates_sorted = sorted(candidates, key=lambda v: (
                    0 if v.path.parent == s.path.parent else 1,
                    -fuzz.ratio(v.stem, s.stem)
                ))
                matched = candidates_sorted[0]
                break
        
        # æ¨¡ç³ŠåŒ¹é…
        if not matched:
            best_score = -1
            for v in videos:
                score = fuzz.token_set_ratio(v.stem, s.stem)
                if v.path.parent == s.path.parent:
                    score += 5  # åŒç›®å½•åŠ æˆ
                if score > best_score and score >= 60:
                    best_score, matched = score, v
```

## ğŸ§µ å¹¶å‘å¤„ç†è®¾è®¡

### å¤šçº¿ç¨‹æ¶æ„

```python
class AudioExtractor(QThread):
    """ä¸»å·¥ä½œçº¿ç¨‹"""
    
    def run(self):
        # åˆ›å»ºä»»åŠ¡é˜Ÿåˆ—
        task_queue = Queue()
        
        # åˆ›å»ºå·¥ä½œçº¿ç¨‹æ± 
        threads = []
        for i in range(self.max_threads):
            thread = threading.Thread(target=self._worker_thread, args=(task_queue,))
            thread.daemon = True
            threads.append(thread)
            thread.start()
        
        # ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ
        for thread in threads:
            thread.join()
```

### çº¿ç¨‹å®‰å…¨æœºåˆ¶

```python
# ä½¿ç”¨QMutexä¿æŠ¤å…±äº«èµ„æº
self.mutex = QMutex()

def update_progress(self):
    self.mutex.lock()
    try:
        self.processed_files += 1
        progress = int((self.processed_files / self.total_files) * 100)
        self.progress_updated.emit(progress)
    finally:
        self.mutex.unlock()
```

### è¿›ç¨‹ç®¡ç†

```python
def stop(self):
    """åœæ­¢å¤„ç†"""
    self.is_stopped = True
    
    # ç»ˆæ­¢æ‰€æœ‰æ´»è·ƒçš„å­è¿›ç¨‹
    for process in self.active_processes:
        try:
            if process.poll() is None:
                process.terminate()
                process.wait(timeout=3)
        except subprocess.TimeoutExpired:
            process.kill()
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

### å†…å­˜ä¼˜åŒ–

1. **æµå¼å¤„ç†**ï¼šé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§æ–‡ä»¶
2. **å¯¹è±¡æ± **ï¼šé‡ç”¨ä¸´æ—¶å¯¹è±¡
3. **åŠæ—¶é‡Šæ”¾**ï¼šå¤„ç†å®Œæ¯•ç«‹å³é‡Šæ”¾èµ„æº
4. **åˆ†é¡µåŠ è½½**ï¼šå¤§é‡æ–‡ä»¶åˆ†æ‰¹å¤„ç†

### IOä¼˜åŒ–

1. **å¼‚æ­¥æ“ä½œ**ï¼šä½¿ç”¨å¼‚æ­¥æ–‡ä»¶æ“ä½œ
2. **æ‰¹é‡å¤„ç†**ï¼šåˆå¹¶å°æ–‡ä»¶æ“ä½œ
3. **ç¼“å­˜ç­–ç•¥**ï¼šç¼“å­˜æ–‡ä»¶ä¿¡æ¯
4. **é¢„è¯»å–**ï¼šæå‰è¯»å–ä¸‹ä¸€ä¸ªæ–‡ä»¶

### CPUä¼˜åŒ–

1. **å¤šçº¿ç¨‹å¹¶è¡Œ**ï¼šå……åˆ†åˆ©ç”¨å¤šæ ¸CPU
2. **ä»»åŠ¡åˆ†é…**ï¼šå¹³è¡¡å„çº¿ç¨‹è´Ÿè½½
3. **ç®—æ³•ä¼˜åŒ–**ï¼šä¼˜åŒ–å…³é”®ç®—æ³•
4. **é¿å…é˜»å¡**ï¼šå‡å°‘UIçº¿ç¨‹é˜»å¡

## ğŸ›¡ï¸ é”™è¯¯å¤„ç†æœºåˆ¶

### åˆ†å±‚é”™è¯¯å¤„ç†

```python
# 1. åº•å±‚é”™è¯¯æ•è·
try:
    result = subprocess.run(cmd, ...)
except subprocess.TimeoutExpired:
    return ProcessResult(success=False, error_msg="å¤„ç†è¶…æ—¶")
except Exception as e:
    return ProcessResult(success=False, error_msg=str(e))

# 2. ä¸šåŠ¡å±‚é”™è¯¯å¤„ç†
def extract_audio(self, video_file: Path) -> ProcessResult:
    try:
        # å…·ä½“ä¸šåŠ¡é€»è¾‘
        pass
    except Exception as e:
        self.log_error(f"å¤„ç†æ–‡ä»¶å¤±è´¥: {video_file}, é”™è¯¯: {e}")
        return ProcessResult(success=False, ...)

# 3. UIå±‚é”™è¯¯å±•ç¤º
def on_file_processed(self, result: ProcessResult):
    if not result.success:
        self.log_message(f"å¤±è´¥ï¼š{result.error_msg}")
```

### æ¢å¤æœºåˆ¶

1. **è‡ªåŠ¨é‡è¯•**ï¼šç½‘ç»œå’ŒIOé”™è¯¯è‡ªåŠ¨é‡è¯•
2. **è·³è¿‡é”™è¯¯**ï¼šå•ä¸ªæ–‡ä»¶é”™è¯¯ä¸å½±å“æ•´ä½“
3. **çŠ¶æ€ä¿å­˜**ï¼šä¿å­˜å¤„ç†çŠ¶æ€æ”¯æŒæ¢å¤
4. **ç”¨æˆ·åé¦ˆ**ï¼šè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œå»ºè®®

## ğŸ”¬ æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•

```python
# tests/test_audio_extractor.py
class TestAudioExtractor(unittest.TestCase):
    def setUp(self):
        self.extractor = AudioExtractor(...)
    
    def test_scan_video_files(self):
        """æµ‹è¯•è§†é¢‘æ–‡ä»¶æ‰«æ"""
        files = self.extractor.scan_video_files()
        self.assertGreater(len(files), 0)
    
    def test_detect_channel_volumes(self):
        """æµ‹è¯•å£°é“æ£€æµ‹"""
        left, right, audio_type = self.extractor.detect_channel_volumes(...)
        self.assertIn(audio_type, ['true_stereo', 'pseudo_stereo_left', ...])
```

### é›†æˆæµ‹è¯•

```python
# tests/test_integration.py
class TestIntegration(unittest.TestCase):
    def test_full_audio_extraction_workflow(self):
        """æµ‹è¯•å®Œæ•´éŸ³é¢‘æå–æµç¨‹"""
        # 1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
        # 2. æ‰§è¡Œæå–
        # 3. éªŒè¯ç»“æœ
        # 4. æ¸…ç†æµ‹è¯•æ–‡ä»¶
```

### æ€§èƒ½æµ‹è¯•

```python
def test_performance_large_batch(self):
    """æµ‹è¯•å¤§æ‰¹é‡å¤„ç†æ€§èƒ½"""
    start_time = time.time()
    # å¤„ç†1000ä¸ªæ–‡ä»¶
    elapsed = time.time() - start_time
    self.assertLess(elapsed, 300)  # åº”åœ¨5åˆ†é’Ÿå†…å®Œæˆ
```

## ğŸ“¦ æ„å»ºå’Œéƒ¨ç½²

### å¼€å‘ç¯å¢ƒæ­å»º

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd refactor_project

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
venv\Scripts\activate     # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. è¿è¡Œæµ‹è¯•
python -m pytest tests/

# 5. å¯åŠ¨åº”ç”¨
python main.py
```

### æ‰“åŒ…éƒ¨ç½²

```bash
# ä½¿ç”¨PyInstalleræ‰“åŒ…
pyinstaller --windowed --onefile main.py

# åˆ›å»ºå®‰è£…åŒ…ï¼ˆéœ€è¦é¢å¤–é…ç½®ï¼‰
makensis installer.nsi
```

### ç‰ˆæœ¬ç®¡ç†

```python
# config/app_config.py
APP_VERSION = "2.0.0"

# ç‰ˆæœ¬å·è§„åˆ™ï¼šä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬
# ä¸»ç‰ˆæœ¬ï¼šé‡å¤§åŠŸèƒ½å˜æ›´
# æ¬¡ç‰ˆæœ¬ï¼šæ–°åŠŸèƒ½æ·»åŠ 
# ä¿®è®¢ç‰ˆæœ¬ï¼šé”™è¯¯ä¿®å¤
```

## ğŸ”§ æ‰©å±•å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½æ¨¡å—

1. **åˆ›å»ºæ¨¡å—ç›®å½•**ï¼š`modules/new_feature/`
2. **å®ç°æ ¸å¿ƒç±»**ï¼šç»§æ‰¿é€‚å½“çš„åŸºç±»
3. **æ·»åŠ UIç•Œé¢**ï¼šåœ¨ä¸»çª—å£æ·»åŠ æ ‡ç­¾é¡µ
4. **æ³¨å†Œä¿¡å·æ§½**ï¼šè¿æ¥UIå’Œä¸šåŠ¡é€»è¾‘
5. **æ›´æ–°é…ç½®**ï¼šæ·»åŠ ç›¸å…³é…ç½®é¡¹
6. **ç¼–å†™æµ‹è¯•**ï¼šæ·»åŠ å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•

### è‡ªå®šä¹‰æ ·å¼ä¸»é¢˜

```python
# ui/styles/custom_theme.py
CUSTOM_COLORS = {
    'primary': '#your_color',
    'background': '#your_background',
    # ...
}

CUSTOM_STYLE = f"""
/* ä½ çš„è‡ªå®šä¹‰æ ·å¼ */
QPushButton {{
    background-color: {CUSTOM_COLORS['primary']};
}}
"""
```

### æ’ä»¶åŒ–æ‰©å±•

```python
# æ’ä»¶æ¥å£
class PluginInterface:
    def get_name(self) -> str:
        """è·å–æ’ä»¶åç§°"""
        pass
    
    def get_widget(self) -> QWidget:
        """è·å–æ’ä»¶ç•Œé¢"""
        pass
    
    def process(self, input_data) -> Any:
        """å¤„ç†ä¸šåŠ¡é€»è¾‘"""
        pass
```

---

å¦‚éœ€äº†è§£æ›´å¤šæŠ€æœ¯ç»†èŠ‚ï¼Œè¯·å‚è€ƒæºä»£ç æ³¨é‡Šæˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

